<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>支付及發票設定</title>
    
 
        
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

</head>



<body>
    <!-- 信用卡 -->
    <form>
        <div>
            <h4>支付設定</h4>
            <!-- 信用卡卡號 -->
            <div>
                <label>信用卡卡號：</label><br>
                <input type="text" id="ccNum" placeholder="**** **** **** ****" maxlength="19">
            </div>

            <br>

            <!-- 有效月年 -->
            <div>
                <label>有效月年：</label><br>
                <select id="ccMonth">
                    <option value="01">01</option>
                    <option value="02">02</option>
                    <option value="03">03</option>
                    <option value="04">04</option>
                    <option value="05">05</option>
                    <option value="06">06</option>
                    <option value="07">07</option>
                    <option value="08">08</option>
                    <option value="09">09</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                </select>
                /
                <select id="ccYear">
                    <script>
                        const currentYear = new Date().getFullYear();
                        const futureYears = 10; // 可自行調整
                        for (let year = currentYear; year <= currentYear + futureYears; year++) {
                            document.write('<option value="' + year + '">' + year + '</option>');
                        }
                    </script>

                </select>
            </div>

            <br>

            <!-- 檢查碼 -->
            <div>
                <label>檢查碼：</label><br>
                <input type="text" id="cvvNum" placeholder="cvv" maxlength="3">
            </div>

            <br>

            <!-- 卡片名稱 -->
            <div>
                <label>卡片名稱：</label><br>
                <input type="text" placeholder="例：趙大文的信用卡">
            </div>

            <br>

            <div>
                <button type="submit">儲存</button>
            </div>
        </div>
    </form>

    <br>
    
    <!-- 發票 -->
    <form>
        <div>
            <h4>發票設定</h4>

            <div>
                <label>公司抬頭：</label><br>
                <input type="text" placeholder="請輸入公司抬頭">
            </div>

            <br>

            <div>
                <label>統編：</label><br>
                <input type="text" id="companyNum" placeholder="請輸入 8 位數字" maxlength="8">
            </div>

            <br>

            <div>
                <button type="submit">儲存</button>
            </div>

        </div>
    </form>


    <script>
        // 信用卡卡號、統編 =>只能填數字
        window.onload = function () {
            const ccNumInput = document.getElementById("ccNum");
            const companyNumInput = document.getElementById("companyNum");

            ccNumInput.addEventListener("keyup", function () {
                const inputVal = ccNumInput.value.replace(/\s/g, ""); // 移除所有空格
                const numericVal = inputVal.replace(/\D/g, ""); // 移除非數字字元
                const formattedVal = formatCreditCardNumber(numericVal);
                ccNumInput.value = formattedVal;
            });

            companyNumInput.addEventListener("keyup", function () {
                companyNumInput.value = companyNumInput.value.replace(/\D/g, ''); //移除非數字字元

            });

            // 信用卡卡號 4 碼空一格
            function formatCreditCardNumber(inputVal) {
                const maxLength = 19; // 最大長度包括空格
                const spaceInterval = 4;

                let formattedVal = "";
                for (let i = 0; i < inputVal.length; i++) {
                    if (i > 0 && i % spaceInterval === 0) {
                        formattedVal += " ";
                    }

                    const currentChar = inputVal[i];
                    if (currentChar !== " ") {
                        formattedVal += currentChar;
                    }
                }

                if (formattedVal.length > maxLength) {
                    formattedVal = formattedVal.slice(0, maxLength);
                }

                return formattedVal;
            }
        }


// 待後端資料建立後，再使用 Spring boot 框架自動帶入資料
    </script>


</body>

</html>